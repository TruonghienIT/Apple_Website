<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>
        Cửa Hàng Apple
    </title>
    <script src="https://cdn.tailwindcss.com">
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Text:wght@400;600&amp;display=swap" rel="stylesheet"/>
    <style>
        body {
        font-family: "SF Pro Text", -apple-system, BlinkMacSystemFont,
            "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
            "Helvetica Neue", sans-serif;
        }
        header {
            position: sticky;
            top: 0;  /* Đảm bảo header ở trên cùng */
            background-color:rgba(255, 255, 255, 0.7);  /* Thêm màu nền để dễ nhìn */
            z-index: 1000;  /* Đảm bảo header hiển thị trên các phần tử khác */
            width: 100%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);  /* Tạo bóng mờ cho header */
        }
        /* Overlay modal */
        .modal {
          display: none;
          position: fixed;
          z-index: 999;
          left: 0; top: 0;
          width: 100%; height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
        }

        /* Nội dung modal */
        .modal-content {
          background-color: #fff;
          margin: 5% auto;
          padding: 30px;
          border-radius: 20px;
          width: 60%;
          position: relative;
        }

        /* Nút đóng */
        .modal .close {
          position: absolute;
          top: 10px; right: 20px;
          font-size: 24px;
          cursor: pointer;
        }
    </style>
</head>
<body class="bg-[#f5f7f7] text-black">
  <header class="w-full flex justify-center px-4 py-2 text-[20px] text-black/80">
    <nav>
      <ul class="flex items-center justify-center flex-wrap gap-4 sm:gap-6 relative">
        <!-- Logo -->
        <li>
          <a class="flex items-center" href="trangchu.html">
            <img alt="Apple logo black" class="block" height="45" src="Image/logo.webp" width="41" />
          </a>
        </li>

        <!-- Các menu chính -->
        <li><a class="hover:underline" href="Main.html">Cửa Hàng</a></li>
        <li class="relative group">
          <a class="hover:underline cursor-pointer" href="Mac.html">Mac</a>
          <ul class="absolute left-0 mt-2 hidden group-hover:flex flex-col bg-white border rounded-md shadow-md text-black w-40 z-10 transition-all duration-200">
            <li><a href="Mac.html#MacbookAir" class="block px-4 py-2 hover:bg-gray-100">Macbook Air</a></li>
            <li><a href="Mac.html#MacbookPro" class="block px-4 py-2 hover:bg-gray-100">Macbook Pro</a></li>
          </ul> 
        </li>

        <li class="relative group">
          <a class="hover:underline cursor-pointer" href="iPad.html">iPad</a>
          <ul class="absolute left-0 mt-2 hidden group-hover:flex flex-col bg-white border rounded-md shadow-md text-black w-40 z-10 transition-all duration-200">
            <li><a href="iPad.html#iPadPro" class="block px-4 py-2 hover:bg-gray-100">iPad Pro </a></li>
            <li><a href="iPad.html#iPadAir" class="block px-4 py-2 hover:bg-gray-100">iPad Air</a></li>
            <li><a href="iPad.html#iPadMini" class="block px-4 py-2 hover:bg-gray-100">iPad Mini</a></li>
            <li><a href="iPad.html#iPadGen" class="block px-4 py-2 hover:bg-gray-100">iPad Gen</a></li>
          </ul> 
        </li>

        <li class="group relative">
          <a class="hover:underline cursor-pointer" href="iPhone.html">iPhone</a>
          <ul class="absolute left-0 mt-2 hidden group-hover:flex flex-col bg-white border rounded-md shadow-md text-black w-40 z-10 transition-all duration-200">
            <li><a href="iPhone.html#iPhone15" class="block px-4 py-2 hover:bg-gray-100">iPhone 15</a></li>
            <li><a href="iPhone.html#iPhone14" class="block px-4 py-2 hover:bg-gray-100">iPhone 14</a></li>
            <li><a href="iPhone.html#iPhone13" class="block px-4 py-2 hover:bg-gray-100">iPhone 13</a></li>
            <li><a href="iPhone.html#iPhone12" class="block px-4 py-2 hover:bg-gray-100">iPhone 12</a></li>
            <li><a href="iPhone.html#iPhone11" class="block px-4 py-2 hover:bg-gray-100">iPhone 11</a></li>
          </ul>
        </li>

        <li class="group relative">
          <a class="hover:underline cursor-pointer" href="Watch.html">Watch</a>
          <ul class="absolute left-0 mt-2 hidden group-hover:flex flex-col bg-white border rounded-md shadow-md text-black w-40 z-10 transition-all duration-200">
            <li><a href="Watch.html#WatchSeries" class="block px-4 py-2 hover:bg-gray-100">Apple Watch Series</a></li>
            <li><a href="Watch.html#WatchSE" class="block px-4 py-2 hover:bg-gray-100">Apple Watch SE</a></li>
            <li><a href="Watch.html#WatchUltra" class="block px-4 py-2 hover:bg-gray-100">Apple Watch Ultra</a></li>
          </ul>
        </li>

        <li class="group relative">
          <a class="hover:underline cursor-pointer" href="AirPods.html">AirPods</a>
          <ul class="absolute left-0 mt-2 hidden group-hover:flex flex-col bg-white border rounded-md shadow-md text-black w-40 z-10 transition-all duration-200">
            <li><a href="AirPods.html#AirPods" class="block px-4 py-2 hover:bg-gray-100">AirPods</a></li>
            <li><a href="AirPods.html#AirPodsPro" class="block px-4 py-2 hover:bg-gray-100">AirPods Pro</a></li>
            <li><a href="AirPods.html#AirPodsMax" class="block px-4 py-2 hover:bg-gray-100">AirPods Max</a></li>
          </ul>
        </li>
        <li><a class="hover:underline" href="TV&Nha.html">TV &amp; Nhà</a></li>
        <li><a class="hover:underline" href="Giaitri.html">Giải Trí</a></li>
        <li><a class="hover:underline" href="Phukien.html">Phụ Kiện</a></li>
        <li><a class="hover:underline" href="Hotro.html">Hỗ Trợ</a></li>
      </ul>
    </nav>

    <!-- Tìm kiếm và đăng nhập -->
    <div class="hidden md:flex items-center space-x-4 text-gray-700 ml-6">
      <!-- Nút tìm kiếm -->
      <button 
        aria-label="Search" 
        class="hover:text-black" 
        onclick="toggleSearchForm()"
      >
        <i class="fas fa-search"></i>
      </button>

      <!-- Form tìm kiếm -->
      <div id="searchForm" class="hidden mt-4 w-full max-w-sm mx-auto">
        <form class="flex items-center" onsubmit="searchProduct(event)">
          <input 
            id="searchInput"
            type="text" 
            placeholder="Tìm kiếm sản phẩm..." 
            class="w-full px-3 py-2 text-sm text-black focus:outline-none" 
          />
          <button type="submit" class="bg-black text-white px-3 py-2 text-sm hover:bg-gray-800">
            Tìm
          </button>
        </form>
      </div>

      <!-- Icon người dùng -->
      <a href="profile.html">
        <button aria-label="User account" class="hover:text-black">
          <i class="fas fa-user"></i>
        </button>
      </a>
    </div>

    <div id="searchResults" class="mt-2 border p-4 rounded bg-white hidden relative">
      <button 
        onclick="closeSearchResults()" 
        class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 font-bold"
        aria-label="Đóng kết quả tìm kiếm"
      >
        &times;
      </button>
      <div id="searchResultsContent" class="flex space-x-4 overflow-x-auto max-w-full"></div>
    </div>

    <!-- Script toggle -->
    <script>
      function toggleSearchForm() {
          const form = document.getElementById('searchForm');
          form.classList.toggle('hidden');
      }

      // Hàm xử lý tìm kiếm sản phẩm
      function searchProduct(event) {
        event.preventDefault();

        const query = document.getElementById('searchInput').value;
        const resultsDiv = document.getElementById('searchResults');
        const resultsContent = document.getElementById('searchResultsContent');

        resultsDiv.classList.remove('hidden');
        resultsContent.innerHTML = "Đang tìm kiếm...";

        fetch('../backend/search.php?query=' + encodeURIComponent(query))
            .then(response => response.text())
            .then(data => {
                resultsContent.innerHTML = data;
            })
            .catch(error => {
                resultsContent.innerHTML = "Đã xảy ra lỗi khi tìm kiếm.";
                console.error("Lỗi:", error);
            });
          }

          // Hàm ẩn kết quả tìm kiếm khi bấm nút đóng
          function closeSearchResults() {
              const resultsDiv = document.getElementById('searchResults');
              resultsDiv.classList.add('hidden');
              // Nếu muốn, xóa nội dung cũ
              document.getElementById('searchResultsContent').innerHTML = "";
          }
      </script>
</header>
    <main>
      <div style="display: flex; justify-content: center; align-items: center; height: 20vh;">
        <h1 style="font-size: 170px; font-weight: 800; color: black;">Mac</h1>
      </div>
      <br>
      <Hr>
        <video
            class="w-full h-auto"
            src="Image/intro Mac.mp4"
            controls
            autoplay
            muted
            playsinline
        >
        Trình duyệt không hỗ trợ video.
        </video>
        <br>
        <section class="max-w-[1200px] mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6">Tìm hiểu về Mac.</h1>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- Card 1 -->
            <div class="rounded-2xl bg-[#c2e0f9] p-4">
            <h4 class="text-xs uppercase text-gray-600">Hiệu năng và thời lượng pin</h4>
            <h3 class="text-lg font-semibold">Làm việc tốc độ. <br>suốt nhiều giờ.</h3>
            <img src="Image/Mac/thời gian.jpg" alt="Mac và iPhone" class="mt-2 rounded-xl">
            </div>

            <!-- Card 2 -->
            <div class="rounded-2xl bg-[#e7f1ec] p-4">
            <h4 class="text-xs uppercase text-gray-600">Mac và iPhone</h4>
            <h3 class="text-lg font-semibold">Đội hình trong mơ.</h3>
            <img src="Image/Mac/Mac_Ip.jpg" alt="Mac và iPhone" class="mt-2 rounded-xl">
            </div>

            <!-- Card 3 -->
            <div class="rounded-2xl bg-[#c2e0f9] p-4">
            <h4 class="text-xs uppercase text-gray-600">Tương Thích</h4>
            <h3 class="text-lg font-semibold">Mac chạy các ứng dụng yêu thích của bạn.</h3>
                <img src="Image/Mac/Tương thích.jpg" alt="Mac và iPhone" class="mt-2 rounded-xl">
            </div>

            <!-- Card 4 -->
            <div class="rounded-2xl bg-[#f2f2f7] p-4">
            <h4 class="text-xs uppercase text-gray-600">Độ bền</h4>
            <h3 class="text-lg font-semibold">Được thiết kế để sinh tồn theo thời gian</h3>
            <img src="Image/Mac/độ bên.jpg" alt="Apple AI" class="mt-2 rounded-xl">
            </div>
        </div>
        </section>
        <br>
        <section class="max-w-[1200px] mx-auto px-4 py-8">
        <div class="header-section flex items-center justify-between">
          <h1 class="text-3xl font-bold mb-6">Khám phá sản phẩm Mac.</h1>
          <div class="button-group flex space-x-4">
            <button id="btnAdd" class="px-4 py-2 rounded-full bg-gray-100 text-lg text-gray-800 font-medium hover:bg-red-200 transition">Thêm</button>
            <button id="btnOpenEdit" class="px-4 py-2 rounded-full bg-gray-100 text-lg text-gray-800 font-medium hover:bg-yellow-200 transition">Sửa</button>
            <button id="btnOpenDelete" class="px-4 py-2 rounded-full bg-gray-100 text-lg text-gray-800 font-medium hover:bg-green-200 transition">Xóa</button>
          </div>
        </div>

        <!-- Nút Thêm -->
        <div id="addProductModal" class="hidden fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4">
          <div class="bg-white rounded-lg shadow-lg max-w-lg w-full p-6 relative overflow-auto max-h-[90vh]">
            <h3 class="text-xl font-semibold mb-6 text-center">Thêm sản phẩm mới</h3>

            <form id="productForm" class="space-y-5" enctype="multipart/form-data">
            <div>
              <label for="category" class="block font-medium">Danh mục</label>
              <input type="text" id="category" name="category" value="Macbook" readonly class="w-full border px-3 py-2 rounded bg-gray-100 cursor-not-allowed" />
            </div>

              <div>
                <label for="subcategory" class="block font-medium mb-1">Loại Macbook <span class="text-red-600">*</span></label>
                <select id="subcategory" name="subcategory" class="w-full border border-gray-300 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-green-600" required>
                  <option value="">Chọn loại</option>
                  <option value="Macbook Air">Macbook Air</option>
                  <option value="Macbook Pro">Macbook Pro</option>
                </select>
              </div>

              <div>
                <label for="name" class="block font-medium mb-1">Tên sản phẩm <span class="text-red-600">*</span></label>
                <input type="text" id="name" name="name" required class="w-full border border-gray-300 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-green-600" />
              </div>

              <div>
                <label for="description" class="block font-medium mb-1">Mô tả</label>
                <textarea id="description" name="description" rows="3" class="w-full border border-gray-300 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-green-600"></textarea>
              </div>

              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label for="price" class="block font-medium mb-1">Giá gốc <span class="text-red-600">*</span></label>
                  <input type="number" id="price" name="price" step="0.01" required class="w-full border border-gray-300 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-green-600" />
                </div>
                <div>
                  <label for="discount_price" class="block font-medium mb-1">Giá khuyến mãi</label>
                  <input type="number" id="discount_price" name="discount_price" step="0.01" class="w-full border border-gray-300 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-green-600" />
                </div>
              </div>

              <div>
                <label for="productImage" class="block font-medium mb-1">Ảnh sản phẩm <span class="text-red-600">*</span></label>
                <input type="file" id="productImage" name="productImage" accept="image/*" required class="w-full border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-green-600" />
              </div>

              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label for="stock" class="block font-medium mb-1">Tồn kho</label>
                  <input type="number" id="stock" name="stock" min="0" class="w-full border border-gray-300 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-green-600" />
                </div>
                <div>
                  <label for="priority" class="block font-medium mb-1">Độ ưu tiên hiển thị</label>
                  <input type="number" id="priority" name="priority" value="0" class="w-full border border-gray-300 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-green-600" />
                </div>
              </div>

              <div class="flex items-center space-x-2">
                <input type="checkbox" id="status" name="status" checked class="mr-2" />
                <label for="status">Hiển thị</label>
              </div>

              <div class="pt-4 flex justify-end space-x-3">
                <button type="submit" class="bg-[#2a5f4d] hover:bg-[#244d3f] text-white px-5 py-2 rounded">Lưu</button>
                <button type="button" id="btnCloseForm" class="border border-gray-300 px-5 py-2 rounded hover:bg-gray-200">Đóng</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Nút Sửa -->
        <div id="editProductModal" class="hidden fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4">
          <div class="bg-white rounded-lg shadow-lg max-w-lg w-full p-6 relative overflow-auto max-h-[90vh]">
            <h3 class="text-xl font-semibold mb-4">Sửa sản phẩm</h3>

            <label for="productSelect" class="block font-medium mb-2">Chọn sản phẩm cần sửa</label>
            <select id="productSelect" class="w-full border px-3 py-2 rounded mb-4">
              <option value="">-- Chọn sản phẩm --</option>
            </select>

            <form id="editProductForm" class="space-y-4">
              <input type="hidden" name="productId" />

              <label for="editName" class="block font-medium">Tên sản phẩm *</label>
              <input type="text" id="editName" name="name" required class="w-full border px-3 py-2 rounded" />

              <label for="editPrice" class="block font-medium">Giá gốc *</label>
              <input type="number" id="editPrice" name="price" step="0.01" required class="w-full border px-3 py-2 rounded" />

              <label for="editDiscountPrice" class="block font-medium">Giá khuyến mại</label>
              <input type="number" id="editDiscountPrice" name="discount_price" step="0.01" class="w-full border px-3 py-2 rounded" />

              <label for="editDescription" class="block font-medium">Mô tả</label>
              <textarea id="editDescription" name="description" class="w-full border px-3 py-2 rounded"></textarea>

              <label for="editStock" class="block font-medium">Hàng tồn kho</label>
              <input type="number" id="editStock" name="stock" step="1" class="w-full border px-3 py-2 rounded" />

              <div class="pt-4 flex justify-end space-x-2">
                <button type="submit" class="bg-[#2a5f4d] text-white px-4 py-2 rounded hover:bg-[#244d3f]">Lưu</button>
                <button type="button" id="btnCloseEditForm" class="px-4 py-2 border rounded hover:bg-gray-200">Đóng</button>
              </div>

              <div id="confirmEditSection" class="hidden mt-4 bg-red-100 p-4 rounded text-red-800">
                <p id="confirmEditText" class="mb-3 font-semibold">Bạn có chắc chắn muốn lưu thay đổi không?</p>
                <button id="btnConfirmEditYes" class="bg-red-600 text-white px-4 py-1 rounded hover:bg-red-700">Có</button>
                <button id="btnConfirmEditNo" class="border border-red-200 text-red-700 px-4 py-1 rounded hover:bg-red-200">Không</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Nút Xóa -->
        <div id="deleteProductModal" class="hidden fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
          <div class="bg-white p-6 rounded shadow-lg w-[400px] max-w-full">
            <h3 class="text-xl font-semibold mb-4 text-red-700">Xóa sản phẩm</h3>
            
            <label for="deleteProductSelect" class="block font-medium mb-2">Chọn sản phẩm cần xóa</label>
            <select id="deleteProductSelect" class="w-full border px-3 py-2 rounded mb-4">
              <option value="">-- Chọn sản phẩm --</option>
            </select>

            <div class="flex justify-end space-x-2">
              <button id="btnConfirmDelete" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700" disabled>Xóa</button>
              <button id="btnCloseDeleteForm" class="px-4 py-2 border rounded hover:bg-gray-200">Đóng</button>
            </div>

            <!-- Phần xác nhận xóa thay thế confirm -->
          <div id="confirmDeleteSection" class="hidden p-4 bg-red-100 rounded mt-4">
            <p id="confirmDeleteText" class="mb-4 text-red-700"></p>
            <button id="btnConfirmDeleteYes" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 mr-2">Xác nhận</button>
            <button id="btnConfirmDeleteNo" class="px-4 py-2 border rounded hover:bg-gray-200">Hủy</button>
          </div>
          </div>
        </div>
        

        <div class="flex gap-10 justify-center">
          <a href="#MacBookAirHeader">
            <button class="px-4 py-2 rounded-full bg-gray-100 text-lg text-gray-800 font-medium hover:bg-blue-200 transition">Macbook Air</button>
          </a>
          <a href="#MacBookProHeader">
            <button class="px-4 py-2 rounded-full bg-gray-100 text-lg text-gray-800 font-medium hover:bg-blue-200 transition">Macbook Pro</button>
          </a>
        </div>
        <br>
        <div id="MacBookAirHeader" class="flex items-center mb-6">
          <div class="bg-gray-900 text-white font-semibold px-4 py-2 rounded-tr-xl rounded-bl-xl">MACBOOK AIR</div>
          <div class="flex-grow h-1 bg-gray-900 ml-4 rounded"></div>
        </div>
        <div id="MacBookAirList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-center text-center"></div>

        <br>

        <div id="MacBookProHeader" class="flex items-center mb-6">
          <div class="bg-gray-900 text-white font-semibold px-4 py-2 rounded-tr-xl rounded-bl-xl">MACBOOK PRO</div>
          <div class="flex-grow h-1 bg-gray-900 ml-4 rounded"></div>
        </div>
        <div id="MacBookProList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-center text-center"></div>
        <hr>
        <br>

        <!-- Modal chi tiết sản phẩm -->
        <div id="productModal" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
          <div class="bg-white rounded-xl p-6 w-[90%] max-w-[600px] relative text-center">
            <span class="absolute top-3 right-4 text-3xl cursor-pointer" onclick="closeModal()">&times;</span>
            <h2 id="modalName" class="text-xl font-bold mb-3"></h2>
            <img id="modalImage" src="" alt="Sản phẩm" class="w-[250px] mx-auto mb-4 rounded-lg">
            <p id="modalPrice" class="text-lg font-semibold text-red-600 mb-2"></p>
            <p id="modalDescription" class="text-sm text-gray-700 leading-relaxed mb-4 text-left"></p>
            <button id="addToCartBtn" data-product-id=""
              onclick="addToCart()"
              class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
              Thêm vào giỏ hàng
            </button>
          </div>
        </div>

        </section>
        
        <hr class="my-8 border-t border-gray-300" />
        <section class="max-w-[1200px] mx-auto px-4 py-8">
        <h2 class="text-2xl font-bold mb-4">Giới thiệu về Apple Mac.</h2>
        <p align="justify" class="mb-6">
          Apple Mac là dòng máy tính của thương hiệu Apple Inc. 
          phổ biến trên toàn thế giới và được đông đảo người dùng yêu thích. 
          Tính đến thời điểm hiện tại, Apple mang đến cho người dùng 5 dòng sản phẩm về Mac, đó là: MacBook, iMac, Mac mini, Mac Pro, Mac Studio và Displays. 
          Đây đều là những sản phẩm vô cùng nổi tiếng trên thị trường và mang đến cho người dùng những trải nghiệm vô cùng tuyệt vời.
        </p>
        <h2 class="text-2xl font-bold mb-4">Giới thiệu về MacBook.</h2>
        <p align="justify" class="mb-4">
          MacBook  là dòng máy tính xách tay của Apple Inc. sản xuất và phát triển. 
          Đặc trưng của dòng này là thiết kế sang trọng cùng trải nghiệm mượt mà, 
          mà nó đem lại nhờ chạy hệ điều hành macOS – hệ điều hành do chính Apple phát triển.
          <br>
          MacBook có 2 dòng sản phẩm chính là MacBook Air và MacBook Pro. 
          Ngoài ra, Apple còn phát triển thêm dòng MacBook M1 sử dụng con chip Apple Silicon M1 
          do chính Apple sản xuất (trước đó họ sử dụng chip Intel hoặc AMD – một bên thứ 3 cung cấp chipset CPU).
        </p>

        <h3 class="font-semibold text-base mb-2">Tại sao nên mua MacBook?</h3>
        <ul align="justify" class="list-disc pl-6 space-y-1">
          <li>Dễ làm quen. Mạnh mẽ đáng kinh ngạc.</li>
          <li>Thiết kế mỏng nhẹ và sang trọng.</li>
          <li>Thiết lập dễ dàng: Nếu bạn chuyển đổi từ máy tính PC hoặc máy Mac cũ hơn, 
            bạn có thể nhanh chóng chuyển các mục cài đặt, tài khoản người dùng 
            và những dữ liệu khác bằng Trợ lý di chuyển chỉ với một vài bước đơn giản.</li>
          <li>Dễ sử dụng: Vuốt lên bảng ba hoặc bốn ngón tay. 
            Ngoài ra, bạn co thể sử dụng Seri để thực hiện các tác vụ hoặc công việc.</li>
          <li>Đáp ứng tốt năng suất công việc: Với chip Apple M1, 
            máy Mac giúp bạn thực hiện tác vụ nhanh hơn bao giờ hết</li>
          <li>Thời lượng pin sử dụng cực kỳ ấn tượng.</li>
          <li>Trải nghiệm mượt mà và không bị giật lag sau nhiều năm sử dụng</li>
          <li>Trackpad lớn và thông minh hơn, tốt hơn rất nhiều so với các Laptop khác.</li>
          <li>Bảo vệ sự riêng tư cho bạn.</li>
        </ul>
      </section>
    </Hr>
    </main>
    <br>
   <hr>
   <footer class="bg-black text-white text-[15px] font-sans rounded-t-2xl">
      <div class="max-w-[1200px] mx-auto px-4 py-8 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
        <div>
          <h3 class="font-semibold mb-2">Sản phẩm</h3>
          <ul class="space-y-1">
            <li>
              <a href="iPhone.html">Iphone</a>
            </li>
            <li>
              <a href="Mac.html">IMac</a>
            </li>
            <li>
              <a href="iPad.html">IPad</a>
            </li>
            <li>
              <a href="Watch.html">Apple Watch</a>
            </li>
            <li>
              <a href="AirPods.html">AirPods</a>
            </li>
            <li>
              <a href="Phukien.html">Phụ Kiện</a>
            </li>
            <li>
              <a href="TV&Nha.html">TV&Nha</a>
            </li>
            <li>
              <a href="Giaitri.html">Giải trí</a>
            </li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold mb-2">Thông tin liên hệ</h3>
          <ul class="space-y-1">
            <li>
              <a href="">Chăm sóc khách hàng</a>
            </li>
            <li>
              <a href="">Dịch vụ sửa chữa Trương Hiện Care</a>
            </li>
            <li>
              <a href="">Khách hàng doanh nghiệp</a>
            </li>
            <li>
              <a href="">Tuyển dụng</a>
            </li>
            <li>
              <a href="">Tra cứu bảo hành</a>
            </li>
          </ul>
        </div>
        <div>
          <a href="">
            <p class="font-semibold mb-2">Thanh toán miễn phí</p>
          </a>
          <a href="">
            <p class="font-semibold mb-2">Hình thức vận chuyển</p>
          </a>
        </div>
        <div>
          <p class="font-semibold mb-1">Tổng đài</p>
          <div class="bg-white text-black font-semibold rounded px-2 py-1 w-max mb-1 inline-block text-[14px]">
            0376834541
          </div>
          <p class="text-[10px] mb-3">(Từ 8h30 - 21h30)</p>
          <p class="font-semibold">Liên hệ với chúng tôi</p>
        </div>
      </div>
      <div class="max-w-[1200px] mx-auto px-4 pb-4 text-[10px] text-center font-sans">
        <p>
          © 2025. CÔNG TY CỔ PHẦN XÂY DỰNG VÀ ĐẦU TƯ THƯƠNG MẠI TRƯƠNG HIỆN IT.
        </p>
        <p>
          Địa chỉ: Số 87 Yên Xá, Phường Tân Triều, Quận Thanh Trì, Hà Nội.
          Điện thoại: +84.376.345.41. Chủ trách nhiệm nội dung: <span class="font-semibold">Trương Công Hiện.</span>
        </p>
      </div>
    </footer>
      <button aria-label="Chat ngay" id="chatToggle" class="fixed bottom-6 right-6 bg-[#2a5f4d] text-white text-[14px] font-semibold rounded-md px-4 py-2 flex items-center space-x-2 shadow-md hover:bg-[#244d3f] transition" type="button">
        <span>
        CHAT NGAY
        </span>
      </button>

      <div id="chatBox" class="fixed bottom-20 right-6 w-80 bg-white rounded shadow-lg border border-gray-200 hidden z-50">
        <div class="bg-green-100 px-4 py-2 flex justify-between items-center rounded-t">
          <span class="text-green-800 font-semibold">LIÊN HỆ ĐỂ ĐƯỢC TƯ VẤN</span>
          <button id="chatClose" class="text-red-500 text-xl font-bold">–</button>
        </div>
        <div class="p-4 space-y-3">
          <a href="tel:0376834541" class="flex items-center bg-gray-100 p-3 rounded hover:bg-gray-200">
            <img src="Image/tel.png" class="w-6 h-6 mr-2" />
            <span>Gọi 0376834541</span>
          </a>
          <a href="zalo.html" target="_blank" class="flex items-center bg-gray-100 p-3 rounded hover:bg-gray-200">
            <img src="Image/zalo.png" class="w-6 h-6 mr-2" />
            <span>Nhắn Zalo</span>
          </a>
          <a href="https://m.me/thanhhien110919" target="_blank" class="flex items-center bg-gray-100 p-3 rounded hover:bg-gray-200">
            <img src="Image/message.png" class="w-6 h-6 mr-2" />
            <span>Nhắn Facebook Messenger</span>
          </a>
        </div>
      </div>
      <script>
              const toggleBtn = document.getElementById('chatToggle');
              const chatBox = document.getElementById('chatBox');
              const closeBtn = document.getElementById('chatClose');

              toggleBtn.addEventListener('click', () => {
                chatBox.classList.toggle('hidden');
              });

              closeBtn.addEventListener('click', () => {
                chatBox.classList.add('hidden');
              });
      </script>

      <script>
        // === SCRIPT 1: THÊM SẢN PHẨM ===
        const addProductURL = 'http://localhost/Web%20Apple/backend/add_product.php';

        const addModal = document.getElementById('addProductModal');
        const btnAdd = document.getElementById('btnAdd');
        const btnClose = document.getElementById('btnCloseForm');

        btnAdd.addEventListener('click', () => {
          addModal.classList.remove('hidden');
        });

        btnClose.addEventListener('click', () => {
          addModal.classList.add('hidden');
        });

        document.getElementById('productForm').addEventListener('submit', async function (e) {
          e.preventDefault();

          const form = this;
          const formData = new FormData(form);
          const submitBtn = form.querySelector('button[type="submit"]');

          submitBtn.disabled = true;
          const originalText = submitBtn.textContent;
          submitBtn.textContent = 'Đang lưu...';

          try {
            const response = await fetch(addProductURL, {
              method: 'POST',
              body: formData,
            });

            if (!response.ok) throw new Error('Network response was not ok');
            const result = await response.json();

            if (result.success) {
              alert(result.message);
              addModal.classList.add('hidden');
              form.reset();
              if (typeof loadProductList === 'function') {
                loadProductList();
              }
            } else {
              alert('Lỗi: ' + result.message);
            }
          } catch (err) {
            alert('Không thể kết nối đến máy chủ.');
            console.error(err);
          } finally {
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
          }
        });
      </script>

      <script>
        const backendBaseURL = "http://localhost/Web%20Apple/backend";

        // ======= MỞ & ĐÓNG FORM SỬA =======
        document.getElementById("btnOpenEdit").addEventListener("click", () => {
          document.getElementById("editProductModal").classList.remove("hidden");
          loadProductDropdown();
        });

        document.getElementById("btnCloseEditForm").addEventListener("click", () => {
          document.getElementById("editProductModal").classList.add("hidden");
          document.getElementById("confirmEditSection").classList.add("hidden");
          editProductPayload = null;
        });

        // ======= TẢI DANH SÁCH SẢN PHẨM =======
        async function loadProductDropdown() {
          try {
            const res = await fetch(`${backendBaseURL}/get_product.php`);
            if (!res.ok) throw new Error(`Lỗi tải sản phẩm: ${res.status}`);

            const data = await res.json();
            const select = document.getElementById("productSelect");
            select.innerHTML = `<option value="">-- Chọn sản phẩm --</option>`;

            data.products.filter(p => p.category.toLowerCase() === 'macbook')
            .forEach(p => {
              const option = document.createElement("option");
              option.value = p.id;
              option.textContent = p.name;
              option.dataset.product = JSON.stringify(p);
              select.appendChild(option);
            });
          } catch (error) {
            console.error("Lỗi load danh sách sản phẩm:", error);
            alert("Lỗi kết nối hoặc tải sản phẩm, vui lòng thử lại.");
          }
        }

        // ======= ĐỔ DỮ LIỆU VÀO FORM SỬA =======
        document.getElementById("productSelect").addEventListener("change", function () {
          const selectedOption = this.options[this.selectedIndex];
          const product = JSON.parse(selectedOption.dataset.product || "{}");

          document.querySelector('[name="productId"]').value = product.id || "";
          document.getElementById("editName").value = product.name || "";
          document.getElementById("editPrice").value = product.price || "";
          document.getElementById("editDiscountPrice").value = product.discount_price || "";
          document.getElementById("editDescription").value = product.description || "";
          document.getElementById("editStock").value = product.stock || "";
        });

        // ======= LƯU TẠM DỮ LIỆU CHỈNH SỬA =======
        let editProductPayload = null;

        document.getElementById("editProductForm").addEventListener("submit", function (e) {
          e.preventDefault();

          const productId = document.querySelector('[name="productId"]').value;
          const name = document.getElementById("editName").value.trim();
          const price = parseFloat(document.getElementById("editPrice").value);
          const discount_price = parseFloat(document.getElementById("editDiscountPrice").value) || 0;
          const description = document.getElementById("editDescription").value.trim();
          const stock = parseInt(document.getElementById("editStock").value);

          if (!productId || !name || isNaN(price) || price < 0 || stock < 0) {
            alert("Vui lòng nhập thông tin hợp lệ.");
            return;
          }

          editProductPayload = { productId, name, price, discount_price, description, stock };
          document.getElementById("confirmEditSection").classList.remove("hidden");
        });

        // ======= XÁC NHẬN LƯU CHỈNH SỬA =======
        document.getElementById("btnConfirmEditYes").addEventListener("click", async () => {
          if (!editProductPayload) return;

          try {
            const response = await fetch(`${backendBaseURL}/update_product.php`, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(editProductPayload)
            });

            const result = await response.json();
            if (result.success) {
              alert("Cập nhật thành công!");
              document.getElementById("editProductModal").classList.add("hidden");
              if (typeof loadProductList === "function") loadProductList();
            } else {
              alert("Cập nhật thất bại: " + result.message);
            }
          } catch (error) {
            console.error("Lỗi cập nhật sản phẩm:", error);
            alert("Lỗi kết nối máy chủ, vui lòng thử lại.");
          } finally {
            document.getElementById("confirmEditSection").classList.add("hidden");
            editProductPayload = null;
          }
        });

        document.getElementById("btnConfirmEditNo").addEventListener("click", () => {
          document.getElementById("confirmEditSection").classList.add("hidden");
          editProductPayload = null;
        });

        // ======= XÓA SẢN PHẨM =======
        const btnOpenDelete = document.getElementById('btnOpenDelete');
        const deleteModal = document.getElementById('deleteProductModal');
        const deleteSelect = document.getElementById('deleteProductSelect');
        const btnConfirmDelete = document.getElementById('btnConfirmDelete');
        const btnCloseDeleteForm = document.getElementById('btnCloseDeleteForm');

        const confirmDeleteSection = document.getElementById('confirmDeleteSection');
        const confirmDeleteText = document.getElementById('confirmDeleteText');
        const btnConfirmDeleteYes = document.getElementById('btnConfirmDeleteYes');
        const btnConfirmDeleteNo = document.getElementById('btnConfirmDeleteNo');

        let productsForDelete = [];

        btnOpenDelete.addEventListener('click', async () => {
          deleteModal.classList.remove('hidden');

          try {
            const response = await fetch(`${backendBaseURL}/get_product.php`);
            if (!response.ok) throw new Error(`Không lấy được danh sách sản phẩm (${response.status})`);
            const data = await response.json();

            productsForDelete = data.products || [];

            deleteSelect.innerHTML = '<option value="">-- Chọn sản phẩm --</option>';
            productsForDelete.filter(p => p.category.toLowerCase() === 'macbook')
            .forEach(p => {
              const option = document.createElement('option');
              option.value = p.id;
              option.textContent = p.name;
              deleteSelect.appendChild(option);
            });

            deleteSelect.value = "";
            btnConfirmDelete.disabled = true;

            confirmDeleteSection.classList.add('hidden');
            btnConfirmDelete.style.display = 'inline-block';

          } catch (error) {
            alert(error.message);
          }
        });

        btnCloseDeleteForm.addEventListener('click', () => {
          deleteModal.classList.add('hidden');
        });

        deleteSelect.addEventListener('change', () => {
          btnConfirmDelete.disabled = !deleteSelect.value;
        });

        btnConfirmDelete.addEventListener('click', () => {
          const selectedIndex = deleteSelect.selectedIndex;
          if (selectedIndex <= 0) return;

          const productName = deleteSelect.options[selectedIndex].text;

          btnConfirmDelete.style.display = 'none';
          confirmDeleteSection.classList.remove('hidden');
          confirmDeleteText.textContent = `Bạn có chắc chắn muốn xóa sản phẩm "${productName}" không?`;
        });

        btnConfirmDeleteYes.addEventListener('click', async () => {
          const id = deleteSelect.value;
          if (!id) return;

          try {
            const response = await fetch(`${backendBaseURL}/delete_product.php`, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ id })
            });

            if (!response.ok) throw new Error(`Lỗi server: ${response.status}`);

            const result = await response.json();

            if (result.success) {
              alert('Xóa sản phẩm thành công!');
              deleteModal.classList.add('hidden');
              btnConfirmDelete.style.display = 'inline-block';
              confirmDeleteSection.classList.add('hidden');
              deleteSelect.value = "";
              btnConfirmDelete.disabled = true;

              if (typeof loadProductList === "function") loadProductList();
            } else {
              alert('Lỗi xóa sản phẩm: ' + result.message);
            }
          } catch (error) {
            console.error("Lỗi xóa sản phẩm:", error);
            alert('Lỗi kết nối máy chủ, vui lòng thử lại.');
          }
        });

        btnConfirmDeleteNo.addEventListener('click', () => {
          confirmDeleteSection.classList.add('hidden');
          btnConfirmDelete.style.display = 'inline-block';
        });
      </script>

      <script>
        const allProducts = {};

        function openModalWithProduct(product, backendURL) {
          document.getElementById("modalName").textContent = product.name;
          document.getElementById("modalImage").src = `${backendURL}/${product.image}`;
          document.getElementById("modalImage").alt = product.name;
          document.getElementById("modalPrice").textContent = `Giá: ${Number(product.discount_price).toLocaleString('vi-VN')}₫`;
          document.getElementById("modalDescription").innerHTML =
            `<strong>Mô tả:</strong> ${product.description || 'Chưa có mô tả.'}`;

          const addToCartBtn = document.getElementById('addToCartBtn');
          addToCartBtn.dataset.productId = product.id;

          // Kiểm tra hàng tồn kho
          if (parseInt(product.stock) === 0) {
            addToCartBtn.disabled = true;
            addToCartBtn.textContent = "Hết hàng";
            addToCartBtn.classList.remove("bg-blue-600", "hover:bg-blue-700", "cursor-pointer");
            addToCartBtn.classList.add("bg-gray-400", "cursor-not-allowed");
          } else {
            addToCartBtn.disabled = false;
            addToCartBtn.textContent = "Thêm vào giỏ hàng";
            addToCartBtn.classList.add("bg-blue-600", "hover:bg-blue-700", "cursor-pointer");
            addToCartBtn.classList.remove("bg-gray-400", "cursor-not-allowed");
          }

          document.getElementById("productModal").style.display = "flex";
        }

        function closeModal() {
          document.getElementById("productModal").style.display = "none";
        }

        async function loadProductList() {
          try {
            const backendURL = 'http://localhost/Web%20Apple/backend';
            const response = await fetch(`${backendURL}/get_product.php`);
            if (!response.ok) throw new Error('Không lấy được danh sách sản phẩm.');

            const data = await response.json();
            if (!data.success) throw new Error('Lỗi backend: ' + (data.message || 'Không có dữ liệu'));

            const airContainer = document.getElementById('MacBookAirList');
            const proContainer = document.getElementById('MacBookProList');

            airContainer.innerHTML = '';
            proContainer.innerHTML = '';

            if (data.products.length === 0) {
              airContainer.innerHTML = 'Chưa có sản phẩm nào.';
              proContainer.innerHTML = 'Chưa có sản phẩm nào.';
              return;
            }

            data.products.filter(p => p.category.toLowerCase() === 'macbook')
              .forEach(product => {
                const imageUrl = `${backendURL}/${product.image}`;
                const discountSection = product.discount_price > 0
                  ? `
                    <p>${Number(product.discount_price).toLocaleString('vi-VN')}₫</p>
                    <p class="line-through text-sm text-gray-500">${Number(product.price).toLocaleString('vi-VN')}₫</p>`
                  : `<p>${Number(product.price).toLocaleString('vi-VN')}₫</p>`;

                const productHtml = `
                <div class="relative rounded-2xl bg-[#c2e0f9] p-4 cursor-pointer group">
                  ${product.stock == 0
                    ? `<span class="absolute top-0 left-0 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded-br-lg z-10">Hết Hàng</span>` : ''}
                  <img src="${imageUrl}" alt="${product.name}" data-id="${product.id}" class="mt-2 rounded-xl product-image hover:scale-105 transition-transform duration-200" />
                    <h3 class="font-semibold text-sm mb-1">${product.name}</h3>
                    <div class="text-red-600 text-lg font-bold">
                      ${discountSection}
                    </div>
                    <p class="text-sm text-gray-600">Tồn kho: ${product.stock}</p>
                </div>
              `;

                allProducts[product.id] = product;
                
                const subcategory = product.subcategory.toLowerCase();
                const container = subcategory.includes('air') ? airContainer : proContainer;
                container.insertAdjacentHTML('beforeend', productHtml);
              });

            // Gán sự kiện click vào ảnh trong mỗi card
            document.querySelectorAll('#MacBookAirList img, #MacBookProList img').forEach((img) => {
            img.addEventListener('click', (event) => {
              event.stopPropagation();
              const id = img.dataset.id;
              const product = allProducts[id];
              if (product) {
                openModalWithProduct(product, backendURL);
              }
            });
          });

          } catch (error) {
            alert(error.message);
            console.error(error);
          }
        }

        window.addEventListener('DOMContentLoaded', loadProductList);
      </script>

      <script>
        function addToCart() {
          const btn = document.getElementById('addToCartBtn');
          if (btn.disabled) return; // Chặn thêm nếu hết hàng

          const productId = btn.dataset.productId;
          const quantity = 1;

          fetch('../backend/add_to_cart.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              product_id: productId,
              quantity: quantity
            })
          })
          .then(res => res.json())
          .then(data => {
            alert(data.message);
            if (data.success) closeModal();
          })
          .catch(err => {
            console.error("Lỗi:", err);
            alert("Đã xảy ra lỗi khi thêm vào giỏ hàng.");
          });
        }
      </script>
    </body>
</html>